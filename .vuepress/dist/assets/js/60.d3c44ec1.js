(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{176:function(t,a,s){"use strict";s.r(a);var n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"珠峰react-router-v4学习笔记-2017"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#珠峰react-router-v4学习笔记-2017","aria-hidden":"true"}},[t._v("#")]),t._v(" 珠峰React-Router-v4学习笔记(2017)")]),s("p",[t._v("[TOC]")]),s("h2",{attrs:{id:"zf-ch01-跑通路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch01-跑通路由","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH01 跑通路由")]),s("p",[s("img",{attrs:{src:"http://ofx24fene.bkt.clouddn.com//img/react/Router1.png",alt:"router1"}})]),s("h2",{attrs:{id:"zf-ch02-完成组件简单模块化和引入bootstrap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch02-完成组件简单模块化和引入bootstrap","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH02 完成组件简单模块化和引入bootstrap")]),s("h2",{attrs:{id:"zf-ch03-嵌套路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch03-嵌套路由","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH03 嵌套路由")]),s("h3",{attrs:{id:"hashrouter-与-browserrouter关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashrouter-与-browserrouter关系","aria-hidden":"true"}},[t._v("#")]),t._v(" HashRouter 与 BrowserRouter关系")]),s("ul",[s("li",[s("p",[t._v("HashRouter的路由样式："),s("code",[t._v("http://localhost:3000/#/home")])]),s("ul",[s("li",[t._v("这个HashRouter肯定和HTML5有关，后面再详细研究")]),s("li",[t._v("我猜这个路由应该适配WebAPP的，这个因为HashRouter需要用到Stack(栈：先进后出)")])])]),s("li",[s("p",[t._v("BrowserRouter的路由样式: "),s("code",[t._v("http://localhost:3000/home")])]),s("ul",[s("li",[t._v("这个就是简单的浏览器样式")])])]),s("li",[s("p",[t._v("当在PC端使用HashRouter路由时，重复点某个导航(Link)时会报这样一个错：")]),s("ul",[s("li",[s("code",[t._v("Warning: Hash history cannot PUSH the same path; a new entry will not be added to the history stack")])]),s("li",[t._v("提示我们push到stack里相同的路径")]),s("li",[t._v("原理解释如下图：")])])])]),s("p",[s("img",{attrs:{src:"http://ofx24fene.bkt.clouddn.com//img/react/react_router_stack.png",alt:"err1"}})]),s("h3",{attrs:{id:"效果图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#效果图","aria-hidden":"true"}},[t._v("#")]),t._v(" 效果图")]),s("p",[s("img",{attrs:{src:"http://ofx24fene.bkt.clouddn.com//img/react/zf_router03.gif",alt:"CH03"}})]),s("h2",{attrs:{id:"zf-ch04-实现用户管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch04-实现用户管理","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH04 实现用户管理")]),s("ul",[s("li",[t._v("ref: "),s("code",[t._v("reference")]),t._v(" 引用\n"),s("ul",[s("li",[t._v("先在某个虚拟元素上 特性上加入ref，ref内部是一个回调函数，函数第一个参数就是当这个虚拟元素mount挂载到页面并生成的那个dom元素，对，就是dom元素！")]),s("li",[t._v("只是栗子中的"),s("code",[t._v("this.name")]),t._v("取得好土。")])])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("UserAdd")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token function-variable function"}},[t._v("handler")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token function"}},[t._v("render")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("input type"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"text"')]),t._v(" ref"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ref"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"zf-ch05-switch组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch05-switch组件","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH05 Switch组件")]),s("ul",[s("li",[s("code",[t._v("react-router-dom")]),t._v("中的"),s("code",[t._v("Switch")]),t._v("，表示只对其内部Route实体进行一次匹配，不像正则那么贪婪。")]),s("li",[s("code",[t._v("exact")]),t._v("也是对Route实体进行精确匹配")])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Switch"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/"')]),t._v(" exact render"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" background"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'red'")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("首页"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Route"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/:pathname"')]),t._v(" render"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" props"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("match"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Route"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/home"')]),t._v(" component"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Route"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/user"')]),t._v(" component"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("User"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Route"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/profile"')]),t._v(" component"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Profile"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Route"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Switch"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h2",{attrs:{id:"zf-ch06-路由实现登录与退出功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch06-路由实现登录与退出功能","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH06 路由实现登录与退出功能")]),s("ul",[s("li",[t._v("当用户访问个人设置页面时，先判断此用户是否已经登录，如果已经登录则可以直接显示个人设置页面；如果此用户没有登录，那么就跳转到登录页面进行登录，如果登录成功就自动调回登录前的页面！")]),s("li",[t._v("当通过函数来定义组件时，参数必须传个属性props对象。")]),s("li",[t._v("而这个props是哪来的呢？是谁调用这个组件就是它的父组件，这个props就由父组件传递。")]),s("li",[t._v("函数和类声明组件的区别？类声明的组件比函数声明的组件多一个状态，因为类会实例化嘛。")]),s("li",[t._v("哪什么时候用函数声明组件呢？当声明的组件不需要状态(例如路由组件)时就可以用函数式声明，反之需要状态的组件要用类声明。")]),s("li",[s("code",[t._v("rest")]),t._v("是 [剩余参数运算符]: "),s("code",[t._v("export default function ({component: Component, ...rest}){}")])]),s("li",[t._v("注意1：这里是结构的格式 前面那个component是结构出来的外来形参，Component是函数作用域内的实参")]),s("li",[t._v("注意2：从路由中导出的Redirect的to属性会封装接收的对象转移到子组件的props.lcocation上")]),s("li",[s("code",[t._v("component")]),t._v("属性 对应一个组件 当URL路径跟当前Route path匹配时渲染")]),s("li",[s("code",[t._v("render")]),t._v("属性 对应一个匿名的组件函数 当URL路径跟当前Route path匹配时渲染")]),s("li",[s("code",[t._v("children")]),t._v("属性 对应一个匿名的组件 不管路由是否匹配当前URL都会进行渲染")])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("////------App.js ↓↓↓↓↓↓↓↓↓")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Router"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/login"')]),t._v(" component"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Login"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Route"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("ProtectedRoute path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"/profile"')]),t._v(" component"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Profile"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("ProtectedRoute"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Router"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("////------App.js ↑↑↑↑↑↑↑↑↑")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("////------Login.js ↓↓↓↓↓↓↓↓↓")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'react'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("button className"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token string"}},[t._v('"btn btn-primary"')]),t._v(" onClick"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    localStorage"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'login'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'true'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    props"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("push")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("登录"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("////------Login.js ↑↑↑↑↑↑↑↑↑")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("////------ProtectedRoute.js ↓↓↓↓↓↓↓↓↓")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'react'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Redirect"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Route "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'react-router-dom'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" component"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Component"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("rest "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("rest"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" render"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    localStorage"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getItem")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'login'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'true'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Component "),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Redirect to"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pathname"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/login'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("from")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" props"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("////------ProtectedRoute.js ↑↑↑↑↑↑↑↑↑")]),t._v("\n")])])]),s("h3",{attrs:{id:"小节流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小节流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 小节流程")]),s("ol",[s("li",[t._v("App.js中定义普通路由"),s("code",[t._v("/login")]),t._v("和受保护路由"),s("code",[t._v("/profile")])]),s("li",[t._v("Login.js不需要状态就用函数式定义")])]),s("ul",[s("li",[t._v("逻辑1：设置已登录flag")]),s("li",[t._v("逻辑2：从props.location.state.from获取前一个页面地址，然后push到history的stack里，页面就跳转了")])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("ProtectedRoute.js 自定义受保护的路由")])]),s("ul",[s("li",[t._v("ES6新语法")]),s("li",[t._v("返回"),s("code",[t._v("<Route />")]),t._v("组件")]),s("li",[t._v("在"),s("code",[t._v("<Route />")]),t._v("里用render属性定义箭头函数，判断flag，如果登录就返回传入的"),s("code",[t._v("<Component />")]),t._v("给render函数去渲染")]),s("li",[t._v("如果没有登录就返回"),s("code",[t._v("<Redirect />")]),t._v("给render渲染，在其里to属性自定义对象，这个对象会传给子附件的"),s("code",[t._v("props.location")]),t._v("属性上")])]),s("h3",{attrs:{id:"react-router另一种渲染组件的方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-router另一种渲染组件的方式","aria-hidden":"true"}},[t._v("#")]),t._v(" React-Router另一种渲染组件的方式")]),s("ul",[s("li",[t._v("在组件上直接挂Render属性，通过箭头函数"),s("code",[t._v("(props)=><div></div>")]),t._v("直接渲染。Link上就不需要挂component了。")])]),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Switch")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token plain-text"}},[t._v("\n  ")]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Route")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("path")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/:name"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("render")]),s("span",{attrs:{class:"token script language-javascript"}},[s("span",{attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("match"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("match"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),s("span",{attrs:{class:"token plain-text"}},[t._v("\n")]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Switch")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("从现在来看，真感觉React真的比Vue强！")])]),s("h2",{attrs:{id:"zf-ch07-实现路由导航匹配高亮"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch07-实现路由导航匹配高亮","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH07 实现路由导航匹配高亮")]),s("ul",[s("li",[t._v("http://www.zhufengpeixun.cn/docs/html/react课程/3.react路由.html")])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" to"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" activeOnlyWhenExact "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("// 这里结构props里的match了，匹配到路由match有值，没有匹配就没值 ")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("to"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" exact"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("activeOnlyWhenExact"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" children"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" match "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("li className"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("match "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'active'")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("''")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("to"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("label"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("/")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"zf-ch08-路由跳转提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch08-路由跳转提示","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH08 路由跳转提示")]),s("ul",[s("li",[t._v("实现流程\n"),s("ol",[s("li",[t._v("在有Input的组件构造函数上添加"),s("code",[t._v("state.blocking=false")]),t._v("属性，当值为true时表示需要提示用户")]),s("li",[t._v("将原组件返回并级加返回一个从Router里导出来的Prompt组件，该组件when属性就是``state.blocking`，而message就是提示string即可")]),s("li",[t._v("设置影响事件onBlur和onChange修改"),s("code",[t._v("state.blocking=true")])]),s("li",[t._v("设置提交按钮是个例外，setState用异步方式push路由")])])])]),s("h2",{attrs:{id:"zf-ch09-404组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zf-ch09-404组件","aria-hidden":"true"}},[t._v("#")]),t._v(" zf_CH09 404组件")]),s("ul",[s("li",[t._v("实现流程\n"),s("ol",[s("li",[t._v("使用函数方式创建组件，因为这组件不需要状态嘛")]),s("li",[t._v("主路由Swich最后写默认路由，不写path属性，它就可以匹配所有路由了")])])])])])}],!1,null,null,null);a.default=o.exports}}]);