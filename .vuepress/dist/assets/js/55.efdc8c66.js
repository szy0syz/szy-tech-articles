(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{181:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"centos-node-js-环境初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos-node-js-环境初始化","aria-hidden":"true"}},[t._v("#")]),t._v(" CentOS Node.js 环境初始化")]),n("h2",{attrs:{id:"环境介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" 环境介绍")]),n("pre",[n("code",[t._v("腾讯云：标准型S2 + 2 核 4 GB 4 Mbps\n")])]),n("h2",{attrs:{id:"步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤","aria-hidden":"true"}},[t._v("#")]),t._v(" 步骤")]),n("h3",{attrs:{id:"修改服务器名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改服务器名","aria-hidden":"true"}},[t._v("#")]),t._v(" 修改服务器名")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("vim /etc/hostname\n")])])]),n("h3",{attrs:{id:"centos-安装-mongodb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos-安装-mongodb","aria-hidden":"true"}},[t._v("#")]),t._v(" CentOS 安装 MongoDB")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 新建  /etc/yum.repos.d/mongodb.repo 文件，并写入以下内容为")]),t._v("\nvim /etc/yum.repos.d/mongodb.repo\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# ----------------------------------")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mongodb-org-3.6"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nname"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("MongoDB Repository\nbaseurl"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("http://mirrors.tencentyun.com/mongodb/yum/redhat/"),n("span",{attrs:{class:"token variable"}},[t._v("$releasever")]),t._v("/3.6/\ngpgcheck"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("0\nenabled"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("1\n"),n("span",{attrs:{class:"token comment"}},[t._v("# ----------------------------------")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 开始安装MongoDB")]),t._v("\nyum "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -y mongodb-org\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 新建默认数据存储目录")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /data/db\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 开启或关闭mongod服务")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" mongod start\n"),n("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" mongod stop\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 修复警告：WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"never"')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" /sys/kernel/mm/transparent_hugepage/enabled\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# \b修复警告：WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"never"')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("  /sys/kernel/mm/transparent_hugepage/defrag\n")])])]),n("h3",{attrs:{id:"安装node-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装node-js","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装Node.js")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 安装nvm")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("curl")]),t._v(" -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("bash")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 编辑 ~/.bashrc 文件，将nvm的注册提到最前面")]),t._v("\nvim ~/.bashrc\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 生效 nvm")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("source")]),t._v(" ~/.bashrc\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 安装 node.js")]),t._v("\nnvm "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" 10.3.0\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 注册 npm 源")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" registry http://registry.npm.taobao.org/\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 更新 npm")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g "),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 安装 Yarn")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("curl")]),t._v(" --silent --location https://dl.yarnpkg.com/rpm/yarn.repo "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("tee")]),t._v(" /etc/yum.repos.d/yarn.repo\nyum "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" yarn\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 修改yarn源")]),t._v("\nyarn config "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" registry https://registry.npm.taobao.org\n")])])]),n("h3",{attrs:{id:"安装-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 Nginx")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\nyum "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\n\nupstream jerryshi "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    server 127.0.0.1:4401"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 这里的端口号写你node.js运行的端口号，也就是要代理的端口号，我的项目跑在8081端口上")]),t._v("\n    keepalive 64"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nserver "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen 80"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("#这里的端口号是你要监听的端口号")]),t._v("\n    server_name jerryshi.com www.jerryshi.com"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 这里是你的服务器名称，也就是别人访问你服务的ip地址或域名，可以写多个，用空格隔开")]),t._v("\n\n    location / "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        proxy_set_header X-Real-IP "),n("span",{attrs:{class:"token variable"}},[t._v("$remote_addr")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header X-Forwarded-For "),n("span",{attrs:{class:"token variable"}},[t._v("$proxy_add_x_forwarded_for")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header Host "),n("span",{attrs:{class:"token variable"}},[t._v("$http_host")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header X-Nginx-Proxy "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header Connection "),n("span",{attrs:{class:"token string"}},[t._v('""')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_pass http://jerryshi"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 这里要和最上面upstream后的应用名一致，可以自定义")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 重定向到https")]),t._v("\n    rewrite ^"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$  https://"),n("span",{attrs:{class:"token variable"}},[t._v("$host")]),n("span",{attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n")])])]),n("h3",{attrs:{id:"todo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#todo","aria-hidden":"true"}},[t._v("#")]),t._v(" Todo")]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("The authenticity of host "),n("span",{attrs:{class:"token string"}},[t._v("'git.coding.net (123.59.83.81)'")]),t._v(" can"),n("span",{attrs:{class:"token string"}},[t._v("'t be established.\nRSA key fingerprint is SHA256:jok3FH7q5LJ6qvE7iPNehBgXRw51ErE77S0Dn+Vg/Ik.\nRSA key fingerprint is MD5:98:ab:2b:30:60:00:82:86:bb:85:db:87:22:c4:4f:b1.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '")]),t._v("git.coding.net,123.59.83.81' "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RSA"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to the list of known hosts.\n")])])])])}],!1,null,null,null);s.default=e.exports}}]);