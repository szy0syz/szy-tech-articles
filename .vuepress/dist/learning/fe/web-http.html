<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP协议原理实践 | Jerry articles</title>
    <meta name="description" content="writing some notes">
    <link rel="icon" href="/logo.png">
  <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/87.styles.24791bc4.css" as="style"><link rel="preload" href="/assets/js/app.d5e53e1d.js" as="script"><link rel="preload" href="/assets/js/66.ec002130.js" as="script"><link rel="prefetch" href="/assets/js/44.d65c3fd7.js"><link rel="prefetch" href="/assets/js/1.74ee5cb4.js"><link rel="prefetch" href="/assets/js/2.5e966c72.js"><link rel="prefetch" href="/assets/js/3.ba142829.js"><link rel="prefetch" href="/assets/js/4.0b295d16.js"><link rel="prefetch" href="/assets/js/5.18a1aae6.js"><link rel="prefetch" href="/assets/js/6.398ea462.js"><link rel="prefetch" href="/assets/js/7.f86e1f4f.js"><link rel="prefetch" href="/assets/js/8.fba70220.js"><link rel="prefetch" href="/assets/js/9.227b7ec9.js"><link rel="prefetch" href="/assets/js/10.4a4ce9a3.js"><link rel="prefetch" href="/assets/js/11.f8fc7706.js"><link rel="prefetch" href="/assets/js/12.b7e89bda.js"><link rel="prefetch" href="/assets/js/13.5fdfcec2.js"><link rel="prefetch" href="/assets/js/14.3dc51b0b.js"><link rel="prefetch" href="/assets/js/15.33eb5846.js"><link rel="prefetch" href="/assets/js/16.a7f5d3a8.js"><link rel="prefetch" href="/assets/js/17.30d25447.js"><link rel="prefetch" href="/assets/js/18.7abc2491.js"><link rel="prefetch" href="/assets/js/19.86f172de.js"><link rel="prefetch" href="/assets/js/20.6657cd0f.js"><link rel="prefetch" href="/assets/js/21.fb4600d8.js"><link rel="prefetch" href="/assets/js/22.7e1c6298.js"><link rel="prefetch" href="/assets/js/23.e4d6bb01.js"><link rel="prefetch" href="/assets/js/24.6923d01b.js"><link rel="prefetch" href="/assets/js/25.8369a5c0.js"><link rel="prefetch" href="/assets/js/26.2cfff635.js"><link rel="prefetch" href="/assets/js/27.65d0161e.js"><link rel="prefetch" href="/assets/js/28.f9316746.js"><link rel="prefetch" href="/assets/js/29.eb9a13f1.js"><link rel="prefetch" href="/assets/js/30.a3daff3f.js"><link rel="prefetch" href="/assets/js/31.9b6d735c.js"><link rel="prefetch" href="/assets/js/32.1b515589.js"><link rel="prefetch" href="/assets/js/33.bc4067a3.js"><link rel="prefetch" href="/assets/js/34.b605b945.js"><link rel="prefetch" href="/assets/js/35.ef549f8d.js"><link rel="prefetch" href="/assets/js/36.ff330d99.js"><link rel="prefetch" href="/assets/js/37.05b616a8.js"><link rel="prefetch" href="/assets/js/38.06d82b3a.js"><link rel="prefetch" href="/assets/js/39.13f6ee7d.js"><link rel="prefetch" href="/assets/js/40.049a9278.js"><link rel="prefetch" href="/assets/js/41.52a73d2a.js"><link rel="prefetch" href="/assets/js/42.3cb0a12b.js"><link rel="prefetch" href="/assets/js/43.4f7a4838.js"><link rel="prefetch" href="/assets/js/0.9b65f788.js"><link rel="prefetch" href="/assets/js/45.019f0d0e.js"><link rel="prefetch" href="/assets/js/46.e2f641de.js"><link rel="prefetch" href="/assets/js/47.7d2807d0.js"><link rel="prefetch" href="/assets/js/48.c289b0d2.js"><link rel="prefetch" href="/assets/js/49.e9e2104f.js"><link rel="prefetch" href="/assets/js/50.59ff6c8f.js"><link rel="prefetch" href="/assets/js/51.01c35bd6.js"><link rel="prefetch" href="/assets/js/52.893d9d3e.js"><link rel="prefetch" href="/assets/js/53.072a7f52.js"><link rel="prefetch" href="/assets/js/54.1919cf1c.js"><link rel="prefetch" href="/assets/js/55.efdc8c66.js"><link rel="prefetch" href="/assets/js/56.1b3dc9a5.js"><link rel="prefetch" href="/assets/js/57.554746b2.js"><link rel="prefetch" href="/assets/js/58.7f250301.js"><link rel="prefetch" href="/assets/js/59.1df35820.js"><link rel="prefetch" href="/assets/js/60.d3c44ec1.js"><link rel="prefetch" href="/assets/js/61.34d3acb0.js"><link rel="prefetch" href="/assets/js/62.04a4488a.js"><link rel="prefetch" href="/assets/js/63.b2816254.js"><link rel="prefetch" href="/assets/js/64.31360c13.js"><link rel="prefetch" href="/assets/js/65.f9703bf4.js"><link rel="prefetch" href="/assets/js/67.8ae6dfaa.js"><link rel="prefetch" href="/assets/js/68.48da390a.js"><link rel="prefetch" href="/assets/js/69.701e8421.js"><link rel="prefetch" href="/assets/js/70.b62351e8.js"><link rel="prefetch" href="/assets/js/71.5a2bab01.js"><link rel="prefetch" href="/assets/js/72.c7d1c4cf.js"><link rel="prefetch" href="/assets/js/73.639526a2.js"><link rel="prefetch" href="/assets/js/74.9c56871b.js"><link rel="prefetch" href="/assets/js/75.3e412c63.js"><link rel="prefetch" href="/assets/js/76.c83a62ea.js"><link rel="prefetch" href="/assets/js/77.af3c1479.js"><link rel="prefetch" href="/assets/js/78.d045cf75.js"><link rel="prefetch" href="/assets/js/79.5cef8852.js"><link rel="prefetch" href="/assets/js/80.77e15e66.js"><link rel="prefetch" href="/assets/js/81.b213c24d.js"><link rel="prefetch" href="/assets/js/82.6b46b61a.js"><link rel="prefetch" href="/assets/js/83.14bb5e57.js"><link rel="prefetch" href="/assets/js/84.165e707a.js"><link rel="prefetch" href="/assets/js/85.70a6af01.js"><link rel="prefetch" href="/assets/js/86.67ca9fc9.js">
    <link rel="stylesheet" href="/assets/css/87.styles.24791bc4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Jerry articles
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/reading/" class="nav-link">读书笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习笔记</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/learning/fe/" class="nav-link router-link-active">前端</a></li><li class="dropdown-item"><!----><a href="/learning/node/" class="nav-link">Node</a></li><li class="dropdown-item"><!----><a href="/learning/python/" class="nav-link">Python</a></li><li class="dropdown-item"><!----><a href="/learning/other/" class="nav-link">other</a></li></ul></div></div><div class="nav-item"><a href="https://jerryshi.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/reading/" class="nav-link">读书笔记</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习笔记</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/learning/fe/" class="nav-link router-link-active">前端</a></li><li class="dropdown-item"><!----><a href="/learning/node/" class="nav-link">Node</a></li><li class="dropdown-item"><!----><a href="/learning/python/" class="nav-link">Python</a></li><li class="dropdown-item"><!----><a href="/learning/other/" class="nav-link">other</a></li></ul></div></div><div class="nav-item"><a href="https://jerryshi.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>HTTP协议原理实践</span><!----></p><ul class="sidebar-group-items"><li><a href="/learning/fe/web-http.html#第2章-http协议基础及发展历史" class="sidebar-link">第2章 HTTP协议基础及发展历史</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_2-1-5层网络模型介绍" class="sidebar-link">2-1 5层网络模型介绍</a></li><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_2-2-http协议的发展历史" class="sidebar-link">2-2 HTTP协议的发展历史</a></li><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_2-3-http的三次握手" class="sidebar-link">2-3 HTTP的三次握手</a></li><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_2-4-uri-url和urn" class="sidebar-link">2-4 URI-URL和URN</a></li><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_2-5-http报文格式" class="sidebar-link">2-5 HTTP报文格式</a></li></ul></li><li><a href="/learning/fe/web-http.html#http各种特性总览" class="sidebar-link">HTTP各种特性总览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_3-1-认识http客户端" class="sidebar-link">3-1 认识HTTP客户端</a></li><li class="sidebar-sub-header"><a href="/learning/fe/web-http.html#_3-2-cors跨域请求的限制与解决" class="sidebar-link">3-2 CORS跨域请求的限制与解决</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="http协议原理实践"><a href="#http协议原理实践" aria-hidden="true" class="header-anchor">#</a> HTTP协议原理实践</h1><pre><code>https://coding.imooc.com/class/225.html
</code></pre><h2 id="第2章-http协议基础及发展历史"><a href="#第2章-http协议基础及发展历史" aria-hidden="true" class="header-anchor">#</a> 第2章 HTTP协议基础及发展历史</h2><h3 id="_2-1-5层网络模型介绍"><a href="#_2-1-5层网络模型介绍" aria-hidden="true" class="header-anchor">#</a> 2-1 5层网络模型介绍</h3><p><img src="http://cdn.jerryshi.com/note/2018/internet-5layers.png" alt="5layer"></p><ul><li>物理层主要作用是定义物理设备如何传输数据</li><li>数据链路层在通信的实体间建立数据链路连接</li><li>网络层为数据再借点之间传输创建逻辑链路</li></ul><p>传输层</p><ul><li>向用户挺可靠的端到端(End-to-End)服务</li><li>传输层向高层屏蔽了下层数据通信的细节</li></ul><p>应用层</p><ul><li>为应用软件提供了很多服务</li><li>构建与TCP协议之上</li><li>屏蔽网络传输相关细节</li></ul><h3 id="_2-2-http协议的发展历史"><a href="#_2-2-http协议的发展历史" aria-hidden="true" class="header-anchor">#</a> 2-2 HTTP协议的发展历史</h3><p>HTTP/0.9</p><ul><li><p>只有一个命令GET</p></li><li><p>没有HEADER等描述数据的信息</p></li><li><p>服务器发送完毕，就关闭TCP连接</p></li><li><p>一个TCP连接对应的是多个HTTP请求，一个HTTP请求肯定是在某一个TCP连接中发送</p><p>在http/1.1中，我们可以在一个TCP协议管道中发送多个HTTP请求，而且在http/2中还将继续在此方面优化。</p></li></ul><p>HTTP/1.0</p><ul><li>增加了很多命令</li><li>增加 <code>status code</code> 和 <code>header</code></li><li>多字符集支持、多部分发送、权限、缓存等</li></ul><p>HTTP/1.1</p><ul><li>持久连接。在HTTP/1.0版本里，一个HTTP请求就需要在客户端与服务端之间创建一个TCP连接，创建后在服务端返回完内容后整个TCP链接就关闭，这个成本很高。</li><li>pipeline。我们可以在客户端同一个链接中送多个请求，服务器可以根据多个请求作响应</li><li>增加host和其他一些命令</li></ul><p>HTTP/2</p><ul><li>所有数据都以二进制传输(http/1.1中是以字符串传输，http/2中都将以“帧”传输)</li><li>同一个链接里面发送多个请求不再需要按顺序来响应，异步响应</li><li>头信息压缩以及推送等提高效率的功能(并行发送静态资源：正常情况我们先请求html，然后再请求img、js、css等文件，有了服务端推送后，我们可以在发送html同时一起发送其它必须的静态资源文件)</li></ul><h3 id="_2-3-http的三次握手"><a href="#_2-3-http的三次握手" aria-hidden="true" class="header-anchor">#</a> 2-3 HTTP的三次握手</h3><p><img src="http://cdn.jerryshi.com/note/2018/tcp-3-handshakings.png" alt="tcp-3"></p><h3 id="_2-4-uri-url和urn"><a href="#_2-4-uri-url和urn" aria-hidden="true" class="header-anchor">#</a> 2-4 URI-URL和URN</h3><p>URI</p><ul><li>Uniform Resource Identifier / 统一资源标识符</li><li>用来唯一标识互联网上的信息资源</li><li>包括URL和URN</li></ul><p>URL</p><ul><li>Uniform Resource Locator / 统一资源定位器</li><li><code>http://uer:pass@host.com:80/path?query=string#hash</code></li></ul><p>URN</p><ul><li>永久统一资源定位符</li><li>在资源移动后还能被找到</li><li>目前还没有非常成熟的使用方案</li></ul><h3 id="_2-5-http报文格式"><a href="#_2-5-http报文格式" aria-hidden="true" class="header-anchor">#</a> 2-5 HTTP报文格式</h3><p>HTTP CODE</p><ul><li>定义服务器对请求的处理结果</li><li>各个区间的CODE有各自的语义</li><li>好的HTTP服务可以通过CODE判断结果</li></ul><h2 id="http各种特性总览"><a href="#http各种特性总览" aria-hidden="true" class="header-anchor">#</a> HTTP各种特性总览</h2><h3 id="_3-1-认识http客户端"><a href="#_3-1-认识http客户端" aria-hidden="true" class="header-anchor">#</a> 3-1 认识HTTP客户端</h3><pre><code>浏览器是一个最常见的HTTP客户端。
</code></pre><p>当浏览器请求<code>baidu.com</code>浏览器首先得到是一下内容，表示请 经过0秒后网页将跳转到url。</p><div class="language-bash extra-class"><pre class="language-bash"><code>╭─jerry@JerrydeiMac  ~
╰─$ <span class="token function">curl</span> baidu.com
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>meta http-equiv<span class="token operator">=</span><span class="token string">&quot;refresh&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;0;url=http://www.baidu.com/&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre></div><p>浏览器访问我的博客时，得到的确实这个内容，表示域名已经永久转义到https上。但关键怎么没有永久转义后的url呢？</p><div class="language-bash extra-class"><pre class="language-bash"><code>╭─jerry@JerrydeiMac  ~
╰─$ <span class="token function">curl</span> jerryshi.com
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>301 Moved Permanently<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body bgcolor<span class="token operator">=</span><span class="token string">&quot;white&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>center<span class="token operator">&gt;</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>301 Moved Permanently<span class="token operator">&lt;</span>/h1<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/center<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span><span class="token operator">&lt;</span>center<span class="token operator">&gt;</span>nginx<span class="token operator">&lt;</span>/center<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre></div><p>我们价格啰嗦模式看看，原来转义后的url在响应头里。</p><div class="language-bash extra-class"><pre class="language-bash"><code>╭─jerry@JerrydeiMac  ~
╰─$ <span class="token function">curl</span> -v jerryshi.com
* Rebuilt URL to: jerryshi.com/
*   Trying 45.40.200.123<span class="token punctuation">..</span>.
* TCP_NODELAY <span class="token keyword">set</span>
* Connected to jerryshi.com <span class="token punctuation">(</span>45.40.200.123<span class="token punctuation">)</span> port 80 <span class="token punctuation">(</span><span class="token comment">#0)</span>
<span class="token operator">&gt;</span> GET / HTTP/1.1
<span class="token operator">&gt;</span> Host: jerryshi.com
<span class="token operator">&gt;</span> User-Agent: curl/7.51.0
<span class="token operator">&gt;</span> Accept: */*
<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span> HTTP/1.1 301 Moved Permanently
<span class="token operator">&lt;</span> Server: nginx
<span class="token operator">&lt;</span> Date: Sat, 09 Jun 2018 07:27:17 GMT
<span class="token operator">&lt;</span> Content-Type: text/html
<span class="token operator">&lt;</span> Content-Length: 178
<span class="token operator">&lt;</span> Connection: keep-alive
<span class="token operator">&lt;</span> Location: https://jerryshi.com/
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>301 Moved Permanently<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body bgcolor<span class="token operator">=</span><span class="token string">&quot;white&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>center<span class="token operator">&gt;</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>301 Moved Permanently<span class="token operator">&lt;</span>/h1<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/center<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span><span class="token operator">&lt;</span>center<span class="token operator">&gt;</span>nginx<span class="token operator">&lt;</span>/center<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
* Curl_http_done: called premature <span class="token operator">==</span> 0
* Connection <span class="token comment">#0 to host jerryshi.com left intact</span>
</code></pre></div><h3 id="_3-2-cors跨域请求的限制与解决"><a href="#_3-2-cors跨域请求的限制与解决" aria-hidden="true" class="header-anchor">#</a> 3-2 CORS跨域请求的限制与解决</h3><p>浏览器跨域请求说白了就是浏览器的默认行为，如果在curl中是不存在跨域的问题。这就表示其实服务器根本不知道你跨不跨域，服务器肯定是响应了请求的，只是客户端浏览器做了拦截并忽略而已。这也就是说只有服务器允许跨域请求，客户端才能使用跨域。</p><p>浏览器是允许link、script、image标签跨域加载，则jsonp的实现原理就是在script标签里加载某个url链接，用这个链接跨域访问某个请求并返回内容。</p><p><code>Access-Control-Allow-Origin: &quot;*&quot;</code></p></div><div class="page-edit"><!----><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">6/29/2018, 3:23:37 PM</span></div></div><!----></div></div></div>
    <script src="/assets/js/66.ec002130.js" defer></script><script src="/assets/js/app.d5e53e1d.js" defer></script>
  </body>
</html>
